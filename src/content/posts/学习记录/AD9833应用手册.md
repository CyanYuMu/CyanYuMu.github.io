---
title: å°å­œåŒå­¦æ•´ç†çš„AD9833ç§»æ¤stm32f407ä½¿ç”¨æ‰‹å†Œ~
published: 2025-11-09
description: "è¿™æ˜¯ä¸€ä»½æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•å»å†™AD9833è¿™æ¬¾ADCçš„é©±åŠ¨ã€‚"
image: ""
tags: [å­¦ä¹ è®°å½•]
category: å­¦ä¹ è®°å½•
draft: false
---

# AD9833åº”ç”¨æ‰‹å†Œ

## AD9833åŠŸèƒ½

- å¯è¾“å‡ºæ­£å¼¦æ³¢ï¼Œä¸‰è§’æ³¢ï¼Œæ–¹æ³¢ã€‚
- ç¨³å®šé¢‘ç‡èŒƒå›´0-2MHzï¼Œä½é¢‘è°ƒé¢‘ç²¾åº¦1Hzï¼ˆè¯¯å·®<5%ï¼‰ã€‚
- å¹…å€¼æ’å®šè¾“å‡º500 - 600mVppï¼Œè¾“å‡ºæ­£è´Ÿäº¤æµç”µã€‚

## ä½¿ç”¨æ–¹æ³•

### ç¡¬ä»¶è¿æ¥

1. ä¸‰çº¿SPI

   STM32ä½œä¸ºSPIçš„ä¸»æœºï¼ŒAD9833ä½œä¸ºä»æœºã€‚

   - NSS --->FSYNC
   - SCK
   - SDATA

2. VCCå’ŒGNDå¯ç›´æ¥è¿æ¥STM32ã€‚

### è½¯ä»¶è®¾ç½®

#### STM32CubeMXé…ç½®

![image-20251129151414477](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751888.png)

- Modeï¼š![image-20251129104005388](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751890.png)
  	è¿™é‡Œæœ‰å…«ç§Modeï¼Œå¤§è‡´åˆ†ä¸ºä¸‰ç±»ï¼š***å…¨åŒå·¥ï¼ŒåŠåŒå·¥ï¼Œå•å‘æ”¶å‘***ã€‚è¿™é‡ŒSTM32ä½œä¸ºä¸»æœºï¼ŒAD9833ä½œä¸ºä»æœºï¼Œæˆ‘ä»¬åªéœ€è¦å‘ä»æœºå•å‘å‘é€æ•°æ®ï¼Œæ‰€ä»¥é€‰æ‹©***Transmit only Master***(åªç”±ä¸»æœºå‘é€)ã€‚

  â€‹	SPIé€šä¿¡è¯¦ç»†çŸ¥è¯†å‚è€ƒï¼š[SPIåè®®è¯¦è§£ï¼ˆå›¾æ–‡å¹¶èŒ‚+è¶…è¯¦ç»†ï¼‰-CSDNåšå®¢](https://blog.csdn.net/u010632165/article/details/109460814?ops_request_misc=%7B%22request%5Fid%22%3A%2207d20a67b0d9b3110d9a1321116bff38%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&request_id=07d20a67b0d9b3110d9a1321116bff38&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-109460814-null-null.142^v102^pc_search_result_base1&utm_term=SPI&spm=1018.2226.3001.4187)

- Hardware NSS Signal

  ![image-20251129104756755](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751891.png)

  â€‹	å‹¾é€‰æ­¤é¡¹æ„å‘³ç€ä½¿ç”¨SPIç¡¬ä»¶ç‰‡é€‰å¼•è„šï¼Œæ­¤å¼•è„šä¸ºå›ºå®šå¼•è„šã€‚è‹¥åç»­æœ‰å¼•è„šä½¿ç”¨å†²çªï¼Œå¯éšæ„å®šä¹‰GPIOå¼•è„šè¾“å‡ºé«˜ä½ç”µå¹³æ¨¡æ‹Ÿç‰‡é€‰ï¼Œè¿™é‡Œé€‰æ‹©Disableå³å¯ã€‚æˆ‘è¿™é‡Œä¸ºæµ‹è¯•SPIé€šä¿¡ï¼Œé‚å‹¾é€‰æ­¤é¡¹ã€‚

- Frame Formatï¼ˆå¸§æ ¼å¼ï¼‰
  ![image-20251129105010958](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751892.png)

  â€‹	è¿™é‡Œé€‰**Motorola æ ¼å¼**æ˜¯å› ä¸ºä»–æ˜¯**SPI çš„æ ‡å‡†æ ¼å¼**ï¼Œé…ç½®å¸§é•¿åº¦è¾ƒçµæ´»ï¼ˆå¯é…ç½®ä¸º 8/16/32 ä½ç­‰ï¼‰ï¼ŒTIå›ºå®š16ä½ï¼Œé€šç”¨æ€§è¾ƒå·®ã€‚

- Data Size

  ![image-20251129111324805](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751893.png)

  â€‹	è™½ç„¶AD9833ä¸€æ¬¡ä¼ è¾“16bitsï¼Œä½†æ˜¯***HALåº“çš„SPIä¼ è¾“å‡½æ•°ä¸€æ¬¡åªæ”¯æŒä¼ é€8bitsï¼ˆconst uint8_tæ ¼å¼ï¼‰***ï¼Œæ‰€ä»¥è¿™é‡Œé€‰æ‹©8bitsã€‚

  ![image-20251129111556088](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751894.png)

- First Bit

  ![image-20251129112005061](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751895.png)

  ![image-20251129112100493](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751896.png)

  â€‹	å› ä¸ºD15,D14å†³å®šå†™å…¥å“ªä¸ªå¯„å­˜å™¨ï¼Œæ‰€ä»¥é€‰***MSBï¼ˆMost Significant Bitï¼‰***å³æœ€é«˜æœ‰æ•ˆä½å…ˆä¼ è¾“ã€‚ä¸ºè¾“å…¥æ•°æ®æŒ‡æ˜æ–¹å‘ã€‚

- Prescaler (for Baud Rate)
  ![image-20251129112725510](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751897.png)
  ![image-20251129112751341](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751898.png)
  	è¿™é‡Œçš„***é¢„åˆ†é¢‘ç³»æ•°é€‰æ‹©16***ï¼Œå¯¹åº”æ³¢ç‰¹ç‡ä¸º2.625Mï¼ˆå°äºå›¾åä¸­çš„AD9833æœ€å¤§ä¼ è¾“é€Ÿç‡40M),å¤ªå¤§äº†ä¸ç¨³å®šï¼Œå¤ªå°äº†å¤ªæ…¢ï¼Œä¿é™©èµ·è§ç•™æœ‰ä½™é‡åªè¦è®¾ç½®å°äº25Må³å¯ã€‚

- CPOLå’ŒCPHA
           ![image-20251129113801218](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751899.png)
  ![image-20251129113917727](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751900.png)        è¿™é‡Œä»æ—¶åºå›¾çœ‹åˆ°AD9833çš„æ—¶é’Ÿä¸€å¼€å§‹æ‹‰é«˜ï¼Œå¹¶ä¸”åœ¨ç¬¬ä¸€ä¸ªæ—¶é’Ÿä¸‹é™æ²¿å¼€å§‹è¯»å–æ•°æ®ï¼Œæ‰€ä»¥***CPOLé€‰æ‹©Highï¼ŒCPHAé€‰æ‹©1 Edgeã€‚***
          SPIé€šä¿¡è¯¦ç»†çŸ¥è¯†å‚è€ƒï¼š[SPIåè®®è¯¦è§£ï¼ˆå›¾æ–‡å¹¶èŒ‚+è¶…è¯¦ç»†ï¼‰-CSDNåšå®¢](https://blog.csdn.net/u010632165/article/details/109460814?ops_request_misc=%7B%22request%5Fid%22%3A%2207d20a67b0d9b3110d9a1321116bff38%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&request_id=07d20a67b0d9b3110d9a1321116bff38&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-109460814-null-null.142^v102^pc_search_result_base1&utm_term=SPI&spm=1018.2226.3001.4187)

- CRC Calculationï¼ˆ**CRC æ ¡éªŒè®¡ç®—**ï¼‰
  ![image-20251129114239570](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751901.png)AD9833 æœ¬èº«ä¸æ”¯æŒ SPI çš„ CRC æ ¡éªŒï¼Œå› æ­¤éœ€å°†è®¾ä¸º**Disabledã€‚**

- NSS Signal Type

  ![image-20251129115631793](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751902.png)

  ä¸Šé¢é€‰æ‹©äº†Hardware NSS Signalçš„è¯ï¼Œè¿™é‡Œ***è‡ªåŠ¨é…ç½®ï¼Œä¸ç”¨ç®¡ä»–ã€‚***

#### keilç¼–è¯‘çƒ§å½•

```AD9833.c
#include "AD9833.h"

#include "spi.h"


/*

*******************************************************

å‘AD9833å‘é€ä¸€ä¸ª16bitçš„æ•°æ®

*******************************************************

*/

void AD9833_Write(unsigned short TxData) //TxDataæ˜¯2å­—èŠ‚

{

unsigned char data[2] ; //ä¸€ä¸ªcharä¸€ä¸ªå­—èŠ‚ï¼Œæ•°ç»„ä¸º2ä¸ªå­—èŠ‚

data[0] = (unsigned char)((TxData>>8) &0xff); //data[0]å­˜å‚¨é«˜ä½

data[1] = (unsigned char)(TxData&0xff); //data[1]å­˜å‚¨ä½ä½


HAL_SPI_Transmit (&hspi2 , data, 2, 0x02) ; //ç”¨HALåº“çš„SPIå‘é€å‡½æ•°å‘é€æ•°æ®


}

/*

*******************************************************

Reset: 0ä¸ºæœ‰è¾“å‡ºï¼Œ1ä¸ºæ²¡è¾“å‡ºï¼Œæ­¤ä½åªæ§åˆ¶æœ‰æ— è¾“å‡ºï¼Œä¸å¤ä½å¯„å­˜å™¨

SleeppMode: 3ä¸ºå…³é—­å†…éƒ¨DACå’Œæ—¶é’Ÿï¼Œ0ä¸ºä¸å…³é—­

optionbit|modebit: 00æ­£å¼¦01ä¸‰è§’10æ–¹æ³¢11ä¿ç•™

*******************************************************

*/

void AD9833_CtrlSet(unsigned char Reset,unsigned char SleeppMode,unsigned char optionbit,unsigned char modebit)

{

unsigned short regtemp = 0; //å¯¹è¾“å‡ºæ¨¡å¼çš„ä¸€äº›é€‰æ‹©

regtemp = regtemp|(((unsigned short)Reset&0x01)<<8); //ä»¥ä¸‹å°±æ˜¯æŠŠæ¯ä¸ªä½å¯¹åº”åˆ°ç›¸åº”çš„å¯„å­˜å™¨ä¸Šï¼ŒDIV2é»˜è®¤ä¸º0

regtemp = regtemp|((SleeppMode&0x03)<<6);

regtemp = regtemp|((optionbit&0x01)<<5);

regtemp = regtemp|((modebit&0x01)<<1);

  

AD9833_Write(regtemp); //å†™å…¥æ•°æ®ï¼Œä¸éœ€è¦å…ˆå£°æ˜å°†è¦å†™å…¥ï¼Œå¯ä»¥å¤ç”¨æŒ‡ä»¤ï¼Œåªè¦å‰ä¸¤ä½æ˜¯00

}

  

/*

*******************************************************

è®¾ç½®é¢‘ç‡ï¼Œè®¾ç½®å®Œåæš‚ä¸è¾“å‡ºï¼Œç”¨CtrlSetå‡½æ•°è®¾ç½®è¾“å‡º

é¢‘ç‡å€¼ï¼š0.1Hz-12.5MHzï¼ˆæœ€å¤§å€¼ä¸º25Mæ™¶æŒ¯æ—¶é’Ÿçš„ä¸€åŠï¼‰

å•ä½ï¼šHz;ä¾‹å¦‚ï¼Œè¾“å‡º1Mï¼Œåˆ™è¾“å…¥1000000

*******************************************************

*/

void AD9833_FreqSet(double Freq) 
{
    // æ ¸å¿ƒï¼šå…ˆè®¡ç®—28ä½é¢‘ç‡æ§åˆ¶å­—
    uint32_t freq_data = (uint32_t)(Freq * 268435456.0 / 25000000.0); 
    // 25000000æ˜¯AD9833å‚è€ƒæ—¶é’Ÿï¼ˆç¡¬ä»¶æ™¶æŒ¯ä¸º25MHzæ—¶ï¼Œè‹¥å®é™…æ˜¯12.5Måˆ™æ”¹ä¸º12500000ï¼‰
    
    // æ‹†åˆ†28ä½ä¸ºä¸¤ä¸ª14ä½ï¼ˆLSBå’ŒMSBï¼‰
    uint16_t frequence_LSB = (uint16_t)(freq_data & 0x3FFF); // ä½14ä½
    uint16_t frequence_MSB = (uint16_t)((freq_data >> 14) & 0x3FFF); // é«˜14ä½
    
    // æ ‡è®°ä¸ºå†™å…¥FREQ0å¯„å­˜å™¨ï¼ˆbit15-14=01ï¼‰
    frequence_LSB |= 0x4000; 
    frequence_MSB |= 0x4000; 
    
    // å…ˆå†™å…¥æ§åˆ¶å­—ï¼šè¿ç»­å†™FREQ0çš„LSBå’ŒMSBï¼ˆbit15-12=0010ï¼Œbit8=0ï¼ˆä¸å¤ä½ï¼‰ï¼‰
    AD9833_Write(0x2000); // åŸä»£ç 0x2100é”™è¯¯ï¼šbit8=1æ˜¯Resetï¼Œä¼šå…³é—­è¾“å‡º
    // æŒ‰é¡ºåºå†™å…¥LSBã€MSB
    AD9833_Write(frequence_LSB);
    AD9833_Write(frequence_MSB);
}



```

```AD9833.h
#include "main.h"

 
void AD9833_Write(unsigned short TxData);

void AD9833_CtrlSet(unsigned char Reset,unsigned char SleeppMode,unsigned char optionbit,unsigned char modebit);

void AD9833_FreqSet(double Freq);

```

```main.c
/* USER CODE BEGIN Header */
/**
  ******************************************************************************
  * @file           : main.c
  * @brief          : Main program body
  ******************************************************************************
  * @attention
  *
  * Copyright (c) 2025 STMicroelectronics.
  * All rights reserved.
  *
  * This software is licensed under terms that can be found in the LICENSE file
  * in the root directory of this software component.
  * If no LICENSE file comes with this software, it is provided AS-IS.
  *
  ******************************************************************************
  */
/* USER CODE END Header */
/* Includes ------------------------------------------------------------------*/
#include "main.h"
#include "spi.h"
#include "gpio.h"

/* Private includes ----------------------------------------------------------*/
/* USER CODE BEGIN Includes */
#include "AD9833.h"
/* USER CODE END Includes */

/* Private typedef -----------------------------------------------------------*/
/* USER CODE BEGIN PTD */

/* USER CODE END PTD */

/* Private define ------------------------------------------------------------*/
/* USER CODE BEGIN PD */

/* USER CODE END PD */

/* Private macro -------------------------------------------------------------*/
/* USER CODE BEGIN PM */

/* USER CODE END PM */

/* Private variables ---------------------------------------------------------*/

/* USER CODE BEGIN PV */

/* USER CODE END PV */

/* Private function prototypes -----------------------------------------------*/
void SystemClock_Config(void);
/* USER CODE BEGIN PFP */

/* USER CODE END PFP */

/* Private user code ---------------------------------------------------------*/
/* USER CODE BEGIN 0 */

/* USER CODE END 0 */

/**
  * @brief  The application entry point.
  * @retval int
  */
int main(void)
{

  /* USER CODE BEGIN 1 */

  /* USER CODE END 1 */

  /* MCU Configuration--------------------------------------------------------*/

  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */
  HAL_Init();

  /* USER CODE BEGIN Init */

  /* USER CODE END Init */

  /* Configure the system clock */
  SystemClock_Config();

  /* USER CODE BEGIN SysInit */

  /* USER CODE END SysInit */

  /* Initialize all configured peripherals */
  MX_GPIO_Init();
  MX_SPI2_Init();
  /* USER CODE BEGIN 2 */
	//ç½®RESETä½ä¸º1ï¼Œå¤ä½AD9833ç¡¬ä»¶ï¼ˆä¸æ¸…é™¤å¯„å­˜å™¨ï¼‰
  AD9833_Write(0x0100); //0001 0000 0000--D8æ˜¯RESETä½
  //çŸ­æš‚å»¶æ—¶ï¼Œç¡®ä¿å¤ä½å®Œæˆï¼ˆ1msè¶³å¤Ÿï¼‰
  HAL_Delay(1);  
  AD9833_FreqSet(10000);//æ–¹æ³¢é¢‘ç‡ä¸ºè®¾ç½®çš„ä¸€åŠï¼Œå…¶ä»–ä¸¤ä¸ªç›¸åŒ
	AD9833_CtrlSet(0,0,0,0);//  00æ­£å¼¦|01ä¸‰è§’|10æ–¹æ³¢|11ä¿ç•™

  /* USER CODE END 2 */

  /* Infinite loop */
  /* USER CODE BEGIN WHILE */
  while (1)
  {
     HAL_Delay(100);//å‡å°‘åŠŸè€—ï¼Œé™ä½ MCU å ç”¨ç‡ï¼šè‹¥æ— å»¶æ—¶ï¼ŒMCU ä¼šä»¥æœ€é«˜ä¸»é¢‘ç–¯ç‹‚æ‰§è¡Œç©ºå¾ªç¯
    /* USER CODE END WHILE */

    /* USER CODE BEGIN 3 */
  }
  /* USER CODE END 3 */
}

/**
  * @brief System Clock Configuration
  * @retval None
  */
void SystemClock_Config(void)
{
  RCC_OscInitTypeDef RCC_OscInitStruct = {0};
  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};

  /** Configure the main internal regulator output voltage
  */
  __HAL_RCC_PWR_CLK_ENABLE();
  __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE1);

  /** Initializes the RCC Oscillators according to the specified parameters
  * in the RCC_OscInitTypeDef structure.
  */
  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSI;
  RCC_OscInitStruct.HSIState = RCC_HSI_ON;
  RCC_OscInitStruct.HSICalibrationValue = RCC_HSICALIBRATION_DEFAULT;
  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI;
  RCC_OscInitStruct.PLL.PLLM = 8;
  RCC_OscInitStruct.PLL.PLLN = 168;
  RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;
  RCC_OscInitStruct.PLL.PLLQ = 4;
  if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
  {
    Error_Handler();
  }

  /** Initializes the CPU, AHB and APB buses clocks
  */
  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV4;
  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV2;

  if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_5) != HAL_OK)
  {
    Error_Handler();
  }
}

/* USER CODE BEGIN 4 */

/* USER CODE END 4 */

/**
  * @brief  This function is executed in case of error occurrence.
  * @retval None
  */
void Error_Handler(void)
{
  /* USER CODE BEGIN Error_Handler_Debug */
  /* User can add his own implementation to report the HAL error return state */
  __disable_irq();
  while (1)
  {
  }
  /* USER CODE END Error_Handler_Debug */
}

#ifdef  USE_FULL_ASSERT
/**
  * @brief  Reports the name of the source file and the source line number
  *         where the assert_param error has occurred.
  * @param  file: pointer to the source file name
  * @param  line: assert_param error line source number
  * @retval None
  */
void assert_failed(uint8_t *file, uint32_t line)
{
  /* USER CODE BEGIN 6 */
  /* User can add his own implementation to report the file name and line number,
     ex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */
  /* USER CODE END 6 */
}
#endif /* USE_FULL_ASSERT */

```



## è½¯ä»¶é©±åŠ¨ç¼–å†™

â€‹	AD9833æœ‰ä¸‰ç§åŠŸèƒ½å¯„å­˜å™¨ï¼Œ***æ§åˆ¶å¯„å­˜å™¨ã€é¢‘ç‡å¯„å­˜å™¨ã€ç›¸ä½å¯„å­˜å™¨***ã€‚AD9833æ¯æ¬¡æ¥æ”¶16bitsï¼Œç„¶åæˆ‘ä»¬æ ¹æ®è¦æ”¹å†™çš„åŠŸèƒ½ï¼ˆé¢‘ç‡æˆ–ç›¸ä½ï¼‰æ”¹å†™16bitsé‡Œçš„å†…å®¹ã€‚

### æ§åˆ¶å¯„å­˜å™¨ï¼ˆ16 bitsï¼‰

â€‹	![image-20251129122841931](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751903.png)
![image-20251129123247878](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751904.png)	æ§åˆ¶å¯„å­˜å™¨å†…æœ‰16bitsï¼Œå³SPIä¼ è¾“ä¸€æ¬¡å¯æ”¹å†™å…¶å…¨éƒ¨å†…å®¹ï¼ˆHAL_SPI_Transmitç¬¬ä¸‰ä¸ªå‚æ•°ä¸º2ï¼Œå³ä¸€æ¬¡ä¼ è¾“ä¸¤ä¸ªå­—èŠ‚)ã€‚***è¿™16bitsçš„åŠŸèƒ½å¤§æ¦‚åˆ†æˆå››ç±»***ã€‚

1. å¸§å¤´(D15,D14)
   ![image-20251129124453556](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751905.png)
   	***D15å’ŒD14ä½è®¾ä¸º0***ï¼Œå‘ŠçŸ¥AD9833æˆ‘ä»¬è¿™16bitså†™å…¥çš„å¯¹è±¡æ˜¯æ§åˆ¶å¯„å­˜å™¨ã€‚

2. è§„å®šæ•°æ®å†™å…¥æ ¼å¼(D13,D12)
   ![image-20251129124850633](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751906.png)
           å› ä¸ºæˆ‘ä»¬ä¸éœ€è¦ç²—è°ƒç»†è°ƒåˆ†å¼€æ¥çš„åŠŸèƒ½ï¼Œæ‰€ä»¥é€‰æ‹©ä¸€æ¬¡è¾“å…¥1 wordï¼ˆ16bits)ï¼Œ***å°†D13è®¾å®šä¸º1ï¼Œæ­¤æ—¶D12æ— ç”¨ï¼Œä¸ç”¨ç®¡ä»–é»˜è®¤ä¸º0ã€‚***

3. è®¾å®šæ³¢å½¢è¾“å‡ºçŠ¶æ€(D1,D3,D5,D11,D10)

   - D1,D3,D5ä¸‰ä½å…±åŒå†³å®šè¾“å‡ºæ³¢å½¢ä¸ºæ­£å¼¦æ³¢ï¼Œä¸‰è§’æ³¢æˆ–è€…æ–¹æ³¢
     ![image-20251129125459677](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751907.png)
   - AD9833å…±æœ‰ä¸¤ä¸ªç‹¬ç«‹çš„é¢‘ç‡å¯„å­˜å™¨FREQ0å’ŒFREQ1ã€‚***D11***å†³å®šè¾“å‡ºå“ªä¸ªå¯„å­˜å™¨å†…çš„å€¼ã€‚***ä¸º0è¾“å‡ºFREQ0***ï¼Œä¸º1è¾“å‡ºFREQ1ã€‚
   - AD9833å…±æœ‰ä¸¤ä¸ªç‹¬ç«‹çš„ç›¸ä½å¯„å­˜å™¨PHASE0å’ŒPHASE1ã€‚D10å†³å®šè¾“å‡ºå“ªä¸ªå¯„å­˜å™¨å†…çš„å€¼ã€‚ä¸º0è¾“å‡ºPHASE0ï¼Œä¸º1è¾“å‡ºPHASE1ã€‚

4. è®¾å®šAD9833å·¥ä½œçŠ¶æ€(D6,D7,D8)

   - ***D8***ä¸ºRESETä½ï¼Œ**ä¸Šç”µæ—¶RESETä¸€æ¬¡**ï¼ˆè®¾ç½®ä¸º1ï¼Œåé¢åœ¨AD9833_CtrlSetå‡½æ•°ä¸­é»˜è®¤è®¾ç½®ä¸º0ï¼‰ï¼Œå¤ä½ç¡¬ä»¶ï¼Œä¸æ”¹å˜é¢‘ç‡å¯„å­˜å™¨å’Œç›¸ä½å¯„å­˜å™¨çš„å€¼ã€‚å³**AD9833æœ‰æ‰ç”µå­˜å‚¨åŠŸèƒ½**ã€‚

     ![image-20251129133033079](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751908.png)
     ![image-20251129134302173](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751909.png)
     ![image-20251129134345071](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751910.png)

   - å°†***D6,D7éƒ½è®¾å®šä¸º0***ï¼Œè®©AD9833ä¸€ç›´ä¿æŒå·¥ä½œçŠ¶æ€ï¼Œè¾“å‡ºæ³¢å½¢ã€‚
     ![image-20251129134556816](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751911.png)

5. é¢„ç•™ä½ï¼ˆD0,D2,D4,D9ï¼‰
   ä¸ºäº†å…¼å®¹æ€§ã€æ‰©å±•æ€§å’Œå®¹é”™æ€§æœ‰å‡ ä¸ªé¢„ç•™ä½ï¼Œæˆ‘ä»¬***ä¸ç”¨ç®¡ä»–ä»¬ï¼Œå…¨éƒ¨éƒ½é»˜è®¤è®¾ç½®ä¸º0*ã€‚**

### é¢‘ç‡å¯„å­˜å™¨ï¼ˆ28 bitsï¼‰

â€‹	AD9833ä¸€æ¬¡åªèƒ½æ¥å—16bitsï¼Œæ‰€ä»¥è¦å‘é€ä¸¤æ¬¡å³32bitså‘é€ï¼Œæ¯æ¬¡éƒ½è¦2bitså¸§å¤´ï¼Œé™¤å»å…±4bitså¸§å¤´ï¼Œ***å‰©ä¸‹28bitså†™å…¥é¢‘ç‡å¯„å­˜å™¨å½“ä½œé¢‘ç‡å¤§å°***ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œé…ç½®FREQ0ã€‚
![image-20251129140143115](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751912.png)

â€‹	1. å¸§å¤´ï¼ˆD14,D15ï¼‰

â€‹	AD9833æœ‰ä¸¤ä¸ªé¢‘ç‡å¯„å­˜å™¨,***D15|D14***åˆ†åˆ«ä¸º***0|1***ï¼Œ1|0æ—¶å†™å…¥***FREQ0***å’ŒFREQ1ã€‚

2. æ•°æ®ä½ï¼ˆå…¶ä»–28bitsï¼‰
   å› ä¸º**AD9833æ˜¯å…ˆå†™å…¥LSB,å†å†™å…¥MSBï¼Œæ‰€ä»¥å‘é€å‡½æ•°ä¹Ÿè¦æŒ‰é¡ºåºç¼–å†™**ã€‚
   ![image-20251129140303339](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751913.png)

### ç›¸ä½å¯„å­˜å™¨ï¼ˆ16 bitsï¼‰

â€‹	ç›¸ä½å¯„å­˜å™¨å’Œé¢‘ç‡å¯„å­˜å™¨æ•°é‡ç›¸åŒï¼Œä¸åŒçš„æ˜¯ä½æ•°å’Œå¸§å¤´æ•°é‡ï¼ˆ3ä¸ªï¼‰ã€‚
![image-20251129140715241](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751914.png)

### é¢‘ç‡è®¡ç®—å…¬å¼

â€‹	è¿™é‡Œç¡¬ä»¶æ™¶æŒ¯æ˜¯25MHzï¼Œæ‰€ä»¥AD9833è¾“å‡ºæ³¢å½¢é¢‘ç‡ç†è®ºä¸Šé™æ˜¯12.5MHzï¼ˆå¥ˆå¥æ–¯ç‰¹é‡‡æ ·å®šå¾‹ï¼‰ã€‚å¯è¾“å‡ºé¢‘ç‡ä¸Šé™ç”±æ™¶æŒ¯å¤§å°å†³å®šã€‚

![image-20251129142857811](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751915.png)

![0e29c9878dfba50b63691f0bd95bc6d4](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751916.jpg)
![image-20251129142945058](https://raw.githubusercontent.com/Etta666/AD9833/main/pic/20251129163751917.png)

## ä½¿ç”¨å¿ƒå¾—

1. ***åˆ†æ¨¡å—***åŠŸèƒ½ç¼–å†™ç¨‹åºã€‚åœ¨AD9833.cé‡Œåˆ†æˆAD9833_Writeï¼ŒAD9833_CtrlSetå’ŒAD9833_FreqSetï¼Œä¹‹æ‰€ä»¥æ²¡æœ‰AD9833_PhaseSetæ˜¯å› ä¸ºAD9833åªæœ‰ä¸€ä¸ªè¾“å‡ºå£ï¼Œæ”¹ä¸æ”¹ç›¸ä½æ²¡å½±å“ã€‚
2. åœ¨ä½¿ç”¨å‘é€æ•°æ®å‡½æ•°çš„æ—¶å€™è¦æ³¨æ„***å‚æ•°æ ¼å¼***å¯¹ä¸å¯¹ã€‚HAL_SPI_Transmitå‡½æ•°é‡Œä¸€æ¬¡åªèƒ½å‘é€8bitsï¼Œå°±ä¸èƒ½ç›´æ¥å¡«å†™16bitsçš„TxDataã€‚
3. åŸºæœ¬***åªç”¨FREQ0***å°±å¤Ÿäº†ã€‚

## é‡åˆ°çš„é—®é¢˜

1. æ— æ³•è¾“å‡ºæ­£å¸¸é¢‘ç‡çš„æ–¹æ³¢ã€‚æ”¹DIV2çš„å€¼ä¸èµ·ä½œç”¨ã€‚åªèƒ½è¾“å‡ºé¢‘ç‡æ¯”è®¾å®šé¢‘ç‡å°ä¸€åŠçš„æ–¹æ³¢ã€‚
2. è¾“å‡ºçš„å¹…åº¦ä¸å¤ªç¨³å®šï¼Œæœ‰æ—¶ä¸æ˜¯0.6Vppï¼Œå˜æˆ0.4Vppã€‚
3. STLINKçƒ§ç¨‹åºä¸å¤ªå¥½ä½¿ï¼ŒåŠ¨ä¸åŠ¨å°±è¦æ‹”äº†é‡è¿ã€‚ğŸ˜‘

## å‚è€ƒ

[STMç¬”è®°_AD9833çš„è¯¦è§£åŠå…¶f407é©±åŠ¨_ad9833é©±åŠ¨ç¨‹åºè¯¦è§£-CSDNåšå®¢](https://blog.csdn.net/2301_76587898/article/details/139061523?spm=1001.2014.3001.5506) 





